@model MVCPresentationWithIdentity.Models.LocationDetailsViewModel
@{
    ViewBag.Title = "Edit "+ Model.Location.Name;
    Layout = "~/Views/Shared/_SupplierDetailsLayout.cshtml";
}
@using Microsoft.AspNet.Identity;
@using Microsoft.AspNet.Identity.Owin;

<div class="panel col w-100 pt-4">
    <div class="d-flex flex-row">
        <div class="col-7 text-end">
            @Html.ValidationMessage("", new { @class = "text-danger" })
            <h2>Edit @Model.Location.Name</h2>
        </div>
        <div class="col-3 text-end pt-2">
            @Html.ActionLink("Delete", "DeleteLocation", "Location", new { locationID = Model.Location.LocationID }, new { onclick = "return confirm('Are sure want to delete this location?');", @class = "btn btn-outline-dark" })
        </div>
    </div>



    <div class="row">
        <div class="col-md-3">
            @Html.Partial("LocationNav", Model.Location.LocationID)
        </div>

        <div class="col-md">
            @using (Html.BeginForm("EditLocation", "Location",
            FormMethod.Post, new { enctype = "multipart/form-data" }))
            {

            <div class="panel-body offset-1 w-auto">
                <div class="form-group w-75">
                    <label>Name</label>
                    @Html.TextArea(Model.Location.Name, Model.Location.Name, new { @class = "form-control", rows = 1 })

                    <label class="pt-2">About you</label>
                    @Html.TextArea(Model.Location.Description, Model.Location.Description, new { @class = "form-control", rows = 5 })
                </div>

                <div class="form-group pt-4">
                    <div class="d-flex flex-row">
                        <label>Tags: &nbsp;</label>
                        @if (Model.LocationTags.Count == 0)
                        {
                            <p>None</p>
                        }
                        else
                        {
                            for (int i = 0; i < Model.LocationTags.Count - 1; i++)
                            {
                                <p>

                                    @Model.LocationTags[i], &nbsp;
                                </p>
                            }
                            <p>@Model.LocationTags[Model.LocationTags.Count - 1]</p>
                        }
                    </div>
                    <button class="btn btn-outline-dark">Add Tag</button>

                    <div class="d-flex flex-row w-75 justify-content-between pt-4">

                        <div class="col-4">
                            <div class="d-flex flex-row text-center">
                                <label class="w-75 pt-1 text-start">Phone Number:</label>
                                @if (Model.Location.Phone is null || Model.Location.Phone.Length is 0)
                                {
                                    @Html.TextArea("Phone: ", null, new { @class = "form-control", rows = 1 })
                                }
                                else
                                {
                                    @Html.TextArea(Model.Location.Phone, Model.Location.Phone, new { @class = "form-control", rows = 1 })
                                }
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="d-flex flex-row text-center">
                                <label class="w-50 pt-1">Email Address:</label>
                                @if (Model.Location.Phone is null || Model.Location.Phone.Length is 0)
                                {
                                    @Html.TextArea("Email: ", null, new { @class = "form-control", rows = 1 })
                                }
                                else
                                {
                                    @Html.TextArea(Model.Location.Email, Model.Location.Email, new { @class = "form-control", rows = 1 })
                                }

                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row pt-4">
                    <label class="pt-1">Address 1: &emsp;</label>
                    <div class="w-25">
                        @Html.TextArea(Model.Location.Address1, Model.Location.Address1, new { @class = "form-control", rows = 1 })
                    </div>
                </div>
                <div class="d-flex flex-row pt-4">
                    <label class="pt-1">Address 2:&emsp;</label>
                    <div class="w-25">
                        @if (Model.Location.Address2 is null || Model.Location.Address2.Length == 0)
                        {
                            @Html.TextArea("Location Name", null, new { @class = "form-control", rows = 1 })
                        }
                        else
                        {
                            @Html.TextArea(Model.Location.Address2, Model.Location.Address2, new { @class = "form-control", rows = 1 })
                        }
                    </div>
                </div>

                <div class="d-flex flex-column pt-4">
                    @if (Model.LocationImages is null || Model.LocationImages.Count == 0) { }
                    else
                    {
                        if (Model.LocationImages.Count > 0)
                        {
                            <h2>Photos</h2>
                            <div id="carouselLocationImages" class="carousel slide col-6 offset-1" data-bs-ride="carousel" data-bs-interval="false">
                                <div class="carousel-inner text-center bg-black">
                                    @{
                                        bool first = true;
                                        foreach (DataObjects.LocationImage image in Model.LocationImages)
                                        {
                                            if (first)
                                            {
                                                first = false;
                                                <div class="carousel-item active w-100">
                                                    <img src="~/content/images/LocationImages/@image.ImageName" style="height: 120px; width: auto; align-content: center; ">
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="carousel-item w-100">
                                                    <img src="~/content/images/LocationImages/@image.ImageName" style="height: 120px; width: auto; align-content: center; ">
                                                </div>

                                            }
                                        }
                                    }
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselLocationImages" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carouselLocationImages" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                        }
                    }
                    @if (Model.LocationImages.Count == 0 || Model.LocationImages is null)
                    {
                        <div class="d-flex flex-row">
                            <button class="btn btn-outline-dark">Add New Photo</button>
                        </div>
                    }
                    else
                    {
                        <div class="d-flex flex-row pt-2">
                            <div class="col-2 offset-2">
                                <button class="btn btn-outline-dark">Add New Photo</button>
                            </div>
                            <div class="col-4 text-start">
                                <button class="btn btn-outline-dark">Delete Selected Photo</button>
                            </div>
                        </div>
                    }

                </div>



                <div class="d-flex flex-column">

                    <div class="d-flex flex-row pt-4">
                        <h2>Pricing</h2>
                    </div>

                    <div class="d-flex flex-row w-75">
                        @if (Model.Location.PricingInfo is null || Model.Location.PricingInfo.Length == 0)
                        {
                            @Html.TextArea(null, null, new { @class = "form-control", rows = 5 })
                        }
                        else
                        {
                            @Html.TextArea(Model.Location.PricingInfo, Model.Location.PricingInfo, new { @class = "form-control", rows = 5 })
                        }
                    </div>

                    <div class="d-flex flex-row pt-4">
                        <button class="btn btn-outline-dark">Save</button>&emsp;
                        <button class="btn btn-outline-dark">Cancel</button>
                    </div>
                </div>
            </div>

            }
        </div>

    </div>
</div>